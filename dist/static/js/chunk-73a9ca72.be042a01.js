(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-73a9ca72"],{"0ccb":function(e,t,a){var i=a("50c4"),n=a("1148"),r=a("1d80"),s=Math.ceil,o=function(e){return function(t,a,o){var l,c,u=String(r(t)),p=u.length,d=void 0===o?" ":String(o),f=i(a);return f<=p||""==d?u:(l=f-p,c=n.call(d,s(l/d.length)),c.length>l&&(c=c.slice(0,l)),e?u+c:c+u)}};e.exports={start:o(!1),end:o(!0)}},"0dc1":function(e,t,a){},1148:function(e,t,a){"use strict";var i=a("a691"),n=a("1d80");e.exports="".repeat||function(e){var t=String(n(this)),a="",r=i(e);if(r<0||r==1/0)throw RangeError("Wrong number of repetitions");for(;r>0;(r>>>=1)&&(t+=t))1&r&&(a+=t);return a}},"204b":function(e,t,a){"use strict";var i=a("0dc1"),n=a.n(i);n.a},"4d90":function(e,t,a){"use strict";var i=a("23e7"),n=a("0ccb").start,r=a("9a0c");i({target:"String",proto:!0,forced:r},{padStart:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}})},"7db0":function(e,t,a){"use strict";var i=a("23e7"),n=a("b727").find,r=a("44d2"),s=a("ae40"),o="find",l=!0,c=s(o);o in[]&&Array(1)[o]((function(){l=!1})),i({target:"Array",proto:!0,forced:l||!c},{find:function(e){return n(this,e,arguments.length>1?arguments[1]:void 0)}}),r(o)},"9a0c":function(e,t,a){var i=a("342f");e.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(i)},a434:function(e,t,a){"use strict";var i=a("23e7"),n=a("23cb"),r=a("a691"),s=a("50c4"),o=a("7b0b"),l=a("65f0"),c=a("8418"),u=a("1dde"),p=a("ae40"),d=u("splice"),f=p("splice",{ACCESSORS:!0,0:0,1:2}),g=Math.max,m=Math.min,h=9007199254740991,b="Maximum allowed length exceeded";i({target:"Array",proto:!0,forced:!d||!f},{splice:function(e,t){var a,i,u,p,d,f,v=o(this),w=s(v.length),y=n(e,w),D=arguments.length;if(0===D?a=i=0:1===D?(a=0,i=w-y):(a=D-2,i=m(g(r(t),0),w-y)),w+a-i>h)throw TypeError(b);for(u=l(v,i),p=0;p<i;p++)d=y+p,d in v&&c(u,p,v[d]);if(u.length=i,a<i){for(p=y;p<w-i;p++)d=p+i,f=p+a,d in v?v[f]=v[d]:delete v[f];for(p=w;p>w-i+a;p--)delete v[p-1]}else if(a>i)for(p=w-i;p>y;p--)d=p+i-1,f=p+a-1,d in v?v[f]=v[d]:delete v[f];for(p=0;p<a;p++)v[p+y]=arguments[p+2];return v.length=w-i+a,u}})},ae54:function(e,t,a){"use strict";a.r(t);var i=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"dis"},[a("div",{staticClass:"filterBox"},[a("el-select",{attrs:{placeholder:"请选择类型"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}},e._l(e.options,(function(e){return a("el-option",{key:e.value,attrs:{label:e.typeName,value:e.newsType_id}})})),1),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.findnewpaper()}}},[e._v("查询")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.changeadd()}}},[e._v("新增")])],1),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticStyle:{width:"100%"},attrs:{data:e.tableData,"header-cell-style":{background:"#eef1f6",color:"#606266"}},on:{"selection-change":e.changeFun}},[a("el-table-column",{attrs:{width:"80",type:"selection",size:"medium"}}),a("el-table-column",{attrs:{prop:"news_id",label:"ID",width:"80"}}),a("el-table-column",{attrs:{label:"标题",prop:"title","show-overflow-tooltip":!0}}),a("el-table-column",{attrs:{label:"发布时间"},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v(e._s(e._f("formatDate")(t.row.update_time)))]}}])}),a("el-table-column",{attrs:{label:"新闻类别",prop:"typeName"}}),a("el-table-column",{attrs:{label:"操作",width:"250"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini",type:"success"},on:{click:function(a){return e.edit(t)}}},[e._v("编辑")]),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){return e.del(t)}}},[e._v("删除")]),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){return e.editDocarousel(t)}}},[e._v("生成轮播图")])]}}])})],1),a("el-button",{staticClass:"del",attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(t){return e.deleteAll()}}},[e._v("批量删除")]),a("div",{staticClass:"block"},[a("el-pagination",{attrs:{background:"",layout:"total,prev, pager, next",total:e.total,small:!0,"page-size":e.limit,"current-page":e.page},on:{"update:pageSize":function(t){e.limit=t},"update:page-size":function(t){e.limit=t},"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},"current-change":e.changepage,"prev-click":e.changepage,"next-click":e.changepage}})],1),a("el-dialog",{attrs:{title:"编辑",visible:e.dialogVisible,width:"80%"},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"form",staticClass:"demo-ruleForm",attrs:{model:e.form,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"新闻标题",prop:"title"}},[a("el-input",{model:{value:e.form.title,callback:function(t){e.$set(e.form,"title",t)},expression:"form.title"}})],1),a("el-form-item",{attrs:{label:"新闻作者",prop:"author"}},[a("el-input",{model:{value:e.form.author,callback:function(t){e.$set(e.form,"author",t)},expression:"form.author"}})],1),a("el-form-item",{attrs:{label:"新闻描述",prop:"titleDesc"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.titleDesc,callback:function(t){e.$set(e.form,"titleDesc",t)},expression:"form.titleDesc"}})],1),a("el-form-item",{attrs:{label:"新闻类型"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}},e._l(e.options,(function(e){return a("el-option",{key:e.newsType_id,attrs:{label:e.typeName,value:e.newsType_id}})})),1)],1),a("el-form-item",{attrs:{label:"新闻图片"}},[a("el-upload",{ref:"forms",staticClass:"avatar-uploader",attrs:{action:"","http-request":e.uploadFile,"auto-upload":!1,"on-remove":e.removes,"list-type":"picture-card","on-change":e.changefile,"file-list":e.phonelist}},[e.imageUrl?a("img",{staticClass:"avatar",attrs:{src:e.imageUrl}}):a("i",{staticClass:"el-icon-plus"})])],1),a("el-form-item",{attrs:{label:"新闻内容",prop:"content"}},[a("quill-editor",{ref:"text",staticClass:"quill-editor",model:{value:e.content,callback:function(t){e.content=t},expression:"content"}})],1),a("el-form-item",[a("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:function(t){return t.preventDefault(),e.onSubmit("form")}}},[e._v("立即提交")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){t.preventDefault(),e.dialogVisible=!1}}},[e._v("取消")])],1)],1)],1),a("el-dialog",{attrs:{title:"轮播图",visible:e.dialogVisibles,width:"28%"},on:{"update:visible":function(t){e.dialogVisibles=t}}},[a("el-form",{ref:"form",attrs:{model:e.form,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"优先级"}},[a("el-radio-group",{model:{value:e.priority,callback:function(t){e.priority=t},expression:"priority"}},[a("el-radio",{attrs:{label:0}},[e._v("一级")]),a("el-radio",{attrs:{label:1}},[e._v("二级")]),a("el-radio",{attrs:{label:2}},[e._v("三级")]),a("el-radio",{attrs:{label:3}},[e._v("四级")])],1)],1),a("el-form-item",{attrs:{label:"状态"}},[a("el-radio-group",{model:{value:e.radio,callback:function(t){e.radio=t},expression:"radio"}},[a("el-radio",{attrs:{label:1}},[e._v("启用")]),a("el-radio",{attrs:{label:0}},[e._v("禁用")])],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisibles=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.Docarousel()}}},[e._v("确 定")])],1)],1)],1)},n=[],r=(a("7db0"),a("4160"),a("a434"),a("159b"),a("ed08")),s=a("953d"),o=(a("a753"),a("8096"),a("14e1"),{created:function(){this.getnewpaper(),this.newpapers()},data:function(){return{options:[],value:"",tableData:[],page:1,limit:8,total:99,checkboxData:[],loading:!1,dialogVisible:!1,dialogVisibles:!1,form:{title:"",titleDesc:"",author:""},carousel:{},value1:"",imageUrl:"",content:"",id:"",priority:1,radio:1,status:!1,phonelist:[],rules:{title:[{required:!0,message:"请输入新闻标题",trigger:"blur"}],author:[{required:!0,message:"请输入新闻作者",trigger:"blur"}],titleDesc:[{required:!0,message:"请输入新闻描述",trigger:"blur"}]}}},filters:{formatDate:function(e){var t=new Date(e);return Object(r["a"])(t,"yyyy-MM-dd hh:mm:ss")}},methods:{getnewpaper:function(){var e=this;this.$store.dispatch("newpaper/paperlist",{page:this.page,limit:this.limit}).then((function(t){if(0!=t.status)return e.$message.error(t.massage);e.tableData=t.data,e.total=t.total}))},newpapers:function(){var e=this;this.$store.dispatch("newpaper/newstype").then((function(t){if(0!=t.status)return e.$message.error(t.massage);e.options=t.data}))},changeFun:function(e){this.checkboxData=e},findnewpaper:function(){var e=this;if(!this.value)return this.$message({message:"请先选择新闻类型",type:"warning"});this.loading=!0,this.$store.dispatch("newpaper/paperlist",{page:this.page,limit:this.limit,type:this.value}).then((function(t){if(0!=t.status)return e.$message.error(t.massage);e.tableData=t.data,e.total=t.total})),this.loading=!1},edit:function(e){var t=this;this.phonelist=[],this.dialogVisible=!0,this.id=e.row.news_id,this.$store.dispatch("newpaper/getnewspaperById",{newID:e.row.news_id+""}).then((function(e){t.form.title=e.data.title,t.form.author=e.data.author,t.form.titleDesc=e.data.titleDesc,t.value1=e.data.typeName,t.content=e.data.content,t.imageUrl="http://118.178.85.48:4000"+e.data.pic}))},onSubmit:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return console.log("error submit!!"),!1;if(!t.content)return t.$message.warning("新闻内容不能为空~");if(t.status)t.$refs.forms.submit();else{var a=t.options.find((function(e){return e.typeName==t.value1||e.newsType_id==t.value1})),i=new FormData;i.append("title",t.form.title),i.append("author",t.form.author),i.append("titleDesc",t.form.titleDesc),i.append("type",a.newsType_id),i.append("content",t.content),i.append("newID",t.id),t.$store.dispatch("newpaper/updatenewspaperById",i).then((function(e){if(0!=e.status)return t.$message.error(e.massage);t.$message({message:"更新新闻成功~",type:"success"}),t.getnewpaper(),t.dialogVisible=!1}))}}))},del:function(e){var t=this;this.$confirm("是否要删除该新闻?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$store.dispatch("newpaper/delnewspaper",{newID:e.row.news_id+""}).then((function(e){if(0!=e.status)return t.$message.error(e.massage)})),t.$message({type:"success",message:"删除成功!"}),t.tableData.splice(e.$index,1)})).catch((function(){}))},changepage:function(e){this.page=e,this.value?this.findnewpaper():this.getnewpaper()},deleteAll:function(){var e=this;if(0==this.checkboxData.length)return this.$message({message:"请先选择要删除的内容~",type:"warning"});this.$confirm("是否要删除所选新闻吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.checkboxData.forEach((function(t){e.$store.dispatch("newpaper/delnewspaper",{newID:t.news_id+""}).then((function(t){if(0!=t.status)return e.$message.error(t.massage);e.$message({type:"success",message:"删除成功!"}),e.getnewpaper()}))}))})).catch((function(){e.getnewpaper()}))},changeadd:function(){this.$router.push("/newspaper/addnewspaper")},uploadFile:function(e){var t=this,a=this.options.find((function(e){return e.typeName==t.value1||e.newsType_id==t.value1})),i=new FormData;i.append("pic",e.file),i.append("title",this.form.title),i.append("author",this.form.author),i.append("titleDesc",this.form.titleDesc),i.append("type",a.newsType_id),i.append("content",this.content),i.append("newID",this.id),this.$store.dispatch("newpaper/updatenewspaperById",i).then((function(e){if(0!=e.status)return t.$message.error(e.massage);t.$message({message:"更新新闻成功~",type:"success"}),t.getnewpaper(),t.dialogVisible=!1}))},changefile:function(e,t){this.status=!0,this.imageUrl="",t.length>1&&t.shift()},editDocarousel:function(e){this.dialogVisibles=!0,this.carousel={title:e.row.title,url:(new Date).getFullYear()+"",img_url:e.row.pic,type:e.row.type}},Docarousel:function(){var e=this;this.carousel.priority=this.priority,this.carousel.status=this.radio,this.$store.dispatch("newpaper/Docarousel",this.carousel).then((function(t){if(0!=t.status)return e.$message.error(t.massage);e.$message({type:"success",message:"生成成功!"}),e.dialogVisibles=!1}))},removes:function(e,t){t.length||(this.status=!1)}},components:{quillEditor:s["quillEditor"]}}),l=o,c=(a("204b"),a("2877")),u=Object(c["a"])(l,i,n,!1,null,null,null);t["default"]=u.exports},ed08:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));a("4160"),a("c975"),a("d3b7"),a("4d63"),a("ac1f"),a("25f0"),a("4d90"),a("5319"),a("1276"),a("159b"),a("a4d3"),a("e01a"),a("d28b"),a("3ca3"),a("ddb0");function i(e,t){/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));var a={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds()};for(var i in a)if(new RegExp("(".concat(i,")")).test(t)){var r=a[i]+"";t=t.replace(RegExp.$1,1===RegExp.$1.length?r:n(r))}return t}function n(e){return("00"+e).substr(e.length)}}}]);