(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7c63ff8a"],{"0ccb":function(t,e,r){var a=r("50c4"),i=r("1148"),l=r("1d80"),o=Math.ceil,s=function(t){return function(e,r,s){var n,u,c=String(l(e)),p=c.length,d=void 0===s?" ":String(s),m=a(r);return m<=p||""==d?c:(n=m-p,u=i.call(d,o(n/d.length)),u.length>n&&(u=u.slice(0,n)),t?c+u:u+c)}};t.exports={start:s(!1),end:s(!0)}},1004:function(t,e,r){},1148:function(t,e,r){"use strict";var a=r("a691"),i=r("1d80");t.exports="".repeat||function(t){var e=String(i(this)),r="",l=a(t);if(l<0||l==1/0)throw RangeError("Wrong number of repetitions");for(;l>0;(l>>>=1)&&(e+=e))1&l&&(r+=e);return r}},"4d90":function(t,e,r){"use strict";var a=r("23e7"),i=r("0ccb").start,l=r("9a0c");a({target:"String",proto:!0,forced:l},{padStart:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}})},"7db0":function(t,e,r){"use strict";var a=r("23e7"),i=r("b727").find,l=r("44d2"),o=r("ae40"),s="find",n=!0,u=o(s);s in[]&&Array(1)[s]((function(){n=!1})),a({target:"Array",proto:!0,forced:n||!u},{find:function(t){return i(this,t,arguments.length>1?arguments[1]:void 0)}}),l(s)},"9a0c":function(t,e,r){var a=r("342f");t.exports=/Version\/10\.\d+(\.\d+)?( Mobile\/\w+)? Safari\//.test(a)},a434:function(t,e,r){"use strict";var a=r("23e7"),i=r("23cb"),l=r("a691"),o=r("50c4"),s=r("7b0b"),n=r("65f0"),u=r("8418"),c=r("1dde"),p=r("ae40"),d=c("splice"),m=p("splice",{ACCESSORS:!0,0:0,1:2}),f=Math.max,g=Math.min,h=9007199254740991,b="Maximum allowed length exceeded";a({target:"Array",proto:!0,forced:!d||!m},{splice:function(t,e){var r,a,c,p,d,m,v=s(this),y=o(v.length),F=i(t,y),w=arguments.length;if(0===w?r=a=0:1===w?(r=0,a=y-F):(r=w-2,a=g(f(l(e),0),y-F)),y+r-a>h)throw TypeError(b);for(c=n(v,a),p=0;p<a;p++)d=F+p,d in v&&u(c,p,v[d]);if(c.length=a,r<a){for(p=F;p<y-a;p++)d=p+a,m=p+r,d in v?v[m]=v[d]:delete v[m];for(p=y;p>y-a+r;p--)delete v[p-1]}else if(r>a)for(p=y-a;p>F;p--)d=p+a-1,m=p+r-1,d in v?v[m]=v[d]:delete v[m];for(p=0;p<r;p++)v[p+F]=arguments[p+2];return v.length=y-a+r,c}})},cb79:function(t,e,r){"use strict";var a=r("1004"),i=r.n(a);i.a},ed08:function(t,e,r){"use strict";r.d(e,"a",(function(){return a}));r("4160"),r("c975"),r("d3b7"),r("4d63"),r("ac1f"),r("25f0"),r("4d90"),r("5319"),r("1276"),r("159b"),r("a4d3"),r("e01a"),r("d28b"),r("3ca3"),r("ddb0");function a(t,e){/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));var r={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds()};for(var a in r)if(new RegExp("(".concat(a,")")).test(e)){var l=r[a]+"";e=e.replace(RegExp.$1,1===RegExp.$1.length?l:i(l))}return e}function i(t){return("00"+t).substr(t.length)}},fe83:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"content"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableData,"header-cell-style":{background:"#eef1f6",color:"#606266"}},on:{"selection-change":t.changeFun}},[r("el-table-column",{attrs:{width:"80",type:"selection",size:"medium"}}),r("el-table-column",{attrs:{prop:"ids",label:"#",width:"80"}}),r("el-table-column",{attrs:{label:"缩略图",align:"center",height:"10px",width:"200"},scopedSlots:t._u([{key:"default",fn:function(t){return[r("el-popover",{attrs:{placement:"right",title:"",trigger:"hover"}},[r("img",{attrs:{src:t.row.img_url}}),r("img",{staticStyle:{"max-height":"50px","max-width":"80px"},attrs:{slot:"reference",src:t.row.img_url},slot:"reference"})])]}}])}),r("el-table-column",{attrs:{label:"顺序",prop:"priority"}}),r("el-table-column",{attrs:{label:"状态"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.status?r("el-tag",{staticClass:"gray"},[t._v(t._s(t._f("statu")(e.row.status)))]):t._e(),1==e.row.status?r("el-tag",{staticClass:"green"},[t._v(t._s(t._f("statu")(e.row.status)))]):t._e()]}}])}),r("el-table-column",{attrs:{label:"标题"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v(t._s(e.row.title))]}}])}),r("el-table-column",{attrs:{label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[r("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(r){return t.upd(e)}}},[t._v("修改")]),r("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(r){return t.del(e)}}},[t._v("删除")])]}}])})],1),r("el-button",{directives:[{name:"show",rawName:"v-show",value:!1,expression:"false"}],staticClass:"del",attrs:{type:"primary",icon:"el-icon-edit"},on:{click:function(e){return t.add()}}},[t._v("添加")]),r("el-button",{staticClass:"del",attrs:{type:"danger",icon:"el-icon-delete"},on:{click:function(e){return t.checkAll()}}},[t._v("批量删除")]),r("div",{staticClass:"block"},[r("el-pagination",{attrs:{background:"",layout:"total,prev, pager, next",total:t.total,small:!0,"page-size":t.limit,"current-page":t.page},on:{"update:pageSize":function(e){t.limit=e},"update:page-size":function(e){t.limit=e},"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"current-change":t.changepage,"prev-click":t.changepage,"next-click":t.changepage}})],1),r("el-dialog",{attrs:{visible:t.dialogVisible,width:"40%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[r("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.ruleForm,rules:t.rules,"label-width":"100px"}},[r("el-form-item",{attrs:{label:"标题",prop:"title"}},[r("el-input",{model:{value:t.ruleForm.title,callback:function(e){t.$set(t.ruleForm,"title",e)},expression:"ruleForm.title"}})],1),r("el-form-item",{attrs:{label:"路径",prop:"url"}},[r("el-input",{attrs:{placeholder:"目前请任意填写"},model:{value:t.ruleForm.url,callback:function(e){t.$set(t.ruleForm,"url",e)},expression:"ruleForm.url"}})],1),r("el-form-item",{attrs:{label:"类型"}},[r("el-select",{attrs:{placeholder:"请选择"},model:{value:t.value1,callback:function(e){t.value1=e},expression:"value1"}},t._l(t.options,(function(t){return r("el-option",{key:t.newsType_id,attrs:{label:t.typeName,value:t.newsType_id}})})),1)],1),r("el-form-item",{attrs:{label:"优先级",prop:"priority"}},[r("el-radio",{attrs:{label:"0"},model:{value:t.ruleForm.priority,callback:function(e){t.$set(t.ruleForm,"priority",e)},expression:"ruleForm.priority"}},[t._v("禁用")]),r("el-radio",{attrs:{label:"1"},model:{value:t.ruleForm.priority,callback:function(e){t.$set(t.ruleForm,"priority",e)},expression:"ruleForm.priority"}},[t._v("可用")]),r("el-radio",{attrs:{label:"2"},model:{value:t.ruleForm.priority,callback:function(e){t.$set(t.ruleForm,"priority",e)},expression:"ruleForm.priority"}},[t._v("可用")]),r("el-radio",{attrs:{label:"3"},model:{value:t.ruleForm.priority,callback:function(e){t.$set(t.ruleForm,"priority",e)},expression:"ruleForm.priority"}},[t._v("可用")])],1),r("el-form-item",{attrs:{label:"状态",prop:"radio"}},[r("el-radio",{attrs:{label:"0"},model:{value:t.ruleForm.radio,callback:function(e){t.$set(t.ruleForm,"radio",e)},expression:"ruleForm.radio"}},[t._v("禁用")]),r("el-radio",{attrs:{label:"1"},model:{value:t.ruleForm.radio,callback:function(e){t.$set(t.ruleForm,"radio",e)},expression:"ruleForm.radio"}},[t._v("可用")])],1),r("el-form-item",{attrs:{label:"新闻图片"}},[r("el-upload",{ref:"upload",staticClass:"avatar-uploader",attrs:{action:"myUrl","http-request":t.uploadFiles,"on-change":t.changes,"on-remove":t.removes,"auto-upload":!1,"list-type":"picture-card","file-list":t.phonelist}},[t.imageUrl?r("img",{staticClass:"avatar",attrs:{src:t.imageUrl,height:"100%",width:"100%"}}):r("i",{staticClass:"el-icon-plus"})])],1),r("el-form-item",[r("el-button",{staticClass:"submit",attrs:{type:"primary"},on:{click:function(e){return t.submitForm("ruleForm")}}},[t._v("提 交")]),r("el-button",{on:{click:function(e){return t.resetForm("ruleForm")}}},[t._v("重置")])],1)],1)],1)],1)},i=[],l=(r("7db0"),r("4160"),r("a434"),r("159b"),r("ade3")),o=(r("ed08"),{created:function(){this.getlist(),this.newtypelist()},data:function(){var t;return t={tableData:[],checkboxData:[],options:[],value1:"",page:1,limit:8,total:99,flag:!1,dialogVisible:!1,ruleForm:{carouselId:"",title:"",priority:"",radio:"",url:"",img_url:""}},Object(l["a"])(t,"flag",!0),Object(l["a"])(t,"status",!1),Object(l["a"])(t,"imageUrl",""),Object(l["a"])(t,"phonelist",[]),Object(l["a"])(t,"rules",{title:[{required:!0,message:"请输入标题",trigger:"blur"}],url:[{required:!0,message:"请输入路径",trigger:"blur"}]}),t},filters:{statu:function(t){return 0==t?"禁用":"启用"}},methods:{changeFun:function(t){this.checkboxData=t},changepage:function(){this.getlist()},getlist:function(){var t=this;this.$store.dispatch("Rotationchart/carousellist",{page:this.page,limit:this.limit}).then((function(e){t.tableData=e.data,t.tableData.forEach((function(t,e){t.ids=e+1,t.img_url="http://118.178.85.48:4000"+t.img_url})),t.total=e.total}))},checkAll:function(){var t=this;if(0==this.checkboxData.length)return this.$message({message:"请先选择要删除的轮播图~",type:"warning"});this.$confirm("你确定要批量删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){var e=[];t.checkboxData.forEach((function(t){e.push({id:t.id+""})})),t.$store.dispatch("Rotationchart/delcarousels",{carouselsIds:e}).then((function(e){if(0!=e.status)return t.$message.error(e.massage);t.$message({message:"批量删除成功~",type:"success"}),t.getlist()}))})).catch((function(){t.getlist()}))},del:function(t){var e=this;this.$confirm("你确定要批量删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$store.dispatch("Rotationchart/delcarousel",{carouselId:t.row.id}).then((function(r){if(0!=r.status)return e.$message.error(r.massage);e.$message({message:"删除成功~",type:"success"}),e.tableData.splice(t.$index,1)}))})).catch((function(){}))},upd:function(t){var e=this;this.phonelist=[],this.dialogVisible=!0,this.$store.dispatch("Rotationchart/findcarousels",{carouselId:t.row.id}).then((function(t){e.ruleForm.carouselId=t.data.id,e.ruleForm.title=t.data.title,e.ruleForm.priority=t.data.priority+"",e.ruleForm.url=t.data.url,e.ruleForm.img_url=t.data.img_url,e.imageUrl="http://118.178.85.48:4000"+t.data.img_url,e.ruleForm.radio=t.data.status+"";var r=e.options.find((function(e){return e.newsType_id==t.data.type}));e.value1=r.typeName}))},submitForm:function(t){var e=this;this.$refs[t].validate((function(t){if(!t)return console.log("error submit!!"),!1;if(!e.value1)return e.$message.warning("类型不能为空~");if(!e.ruleForm.priority)return e.$message.warning("轮播图优先级不能为空~");if(!e.ruleForm.radio)return e.$message.warning("轮播图状态不能为空~");if(e.status)e.$refs.upload.submit();else{var r=e.options.find((function(t){return t.newsType_id==e.value1||t.typeName==e.value1})),a={title:e.ruleForm.title,url:e.ruleForm.url,priority:parseInt(e.ruleForm.priority),type:r.newsType_id,status:parseInt(e.ruleForm.radio),carouselId:e.ruleForm.carouselId+"",img_url:e.ruleForm.img_url};e.$store.dispatch("Rotationchart/updcarousels",a).then((function(t){if(0!=t.status)return e.$message.error(t.massage);e.$message({message:"修改轮播图成功~",type:"success"}),e.dialogVisible=!1,e.getlist()}))}}))},newtypelist:function(){var t=this;this.$store.dispatch("newpaper/newstype").then((function(e){if(0!=e.status)return t.$message.error(e.massage);t.options=e.data}))},add:function(){this.dialogVisible=!0,this.ruleForm={}},uploadFiles:function(t){var e=this,r=this.options.find((function(t){return t.typeName==e.value1||t.newsType_id==e.value1})),a=new FormData;a.append("pic",t.file),a.append("title",this.ruleForm.title),a.append("url",this.ruleForm.url),a.append("img_url",this.ruleForm.img_url),a.append("priority",parseInt(this.ruleForm.priority)),a.append("type",r.newsType_id),a.append("status",parseInt(this.ruleForm.radio)),a.append("carouselId",this.ruleForm.carouselId+""),this.$store.dispatch("Rotationchart/updcarousels",a).then((function(t){if(0!=t.status)return e.$message.error(t.massage);e.$message({message:"修改轮播图成功~",type:"success"}),e.dialogVisible=!1,e.getlist()}))},changes:function(t,e){this.status=!0,this.imageUrl="",e.length>1&&e.shift()},removes:function(t,e){e.length||(this.status=!0)},resetForm:function(t){this.ruleForm.title="",this.ruleForm.priority="",this.ruleForm.radio="",this.ruleForm.url="",this.value1=""}}}),s=o,n=(r("cb79"),r("2877")),u=Object(n["a"])(s,a,i,!1,null,null,null);e["default"]=u.exports}}]);